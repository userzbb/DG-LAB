# 数据包格式

## 数据包结构

```
+--------+---------+----------+----------+----------+--------+
| Header | Command | Data Len |   Data   | Checksum | Tail   |
| (1B)   |  (1B)   |   (1B)   | (N bytes)|   (1B)   |  (1B)  |
+--------+---------+----------+----------+----------+--------+
```

### 字段说明

| 字段 | 长度 | 说明 |
|------|------|------|
| Header | 1 字节 | 包头，固定值 `0xAA` |
| Command | 1 字节 | 命令码 |
| Data Len | 1 字节 | 数据长度 (0-255) |
| Data | N 字节 | 数据载荷 |
| Checksum | 1 字节 | 校验和 |
| Tail | 1 字节 | 包尾，固定值 `0x55` |

### 校验和计算

```
Checksum = Header + Command + DataLen + sum(Data) + Tail
```

所有字节相加，取低 8 位。

## 命令码列表

| 命令码 | 名称 | 说明 |
|--------|------|------|
| `0x01` | GetInfo | 获取设备信息 |
| `0x10` | SetPowerA | 设置通道 A 强度 |
| `0x11` | SetPowerB | 设置通道 B 强度 |
| `0x12` | SetWaveA | 设置通道 A 波形 |
| `0x13` | SetWaveB | 设置通道 B 波形 |
| `0x14` | SetMode | 设置工作模式 |
| `0x20` | Start | 开始输出 |
| `0x21` | Stop | 停止输出 |
| `0x30` | Heartbeat | 心跳包 |
| `0x80` | Response | 设备响应 |

## 待确认

- [ ] 完整的命令码列表
- [ ] 各命令的数据格式
- [ ] 响应数据格式
- [ ] 波形数据编码方式
